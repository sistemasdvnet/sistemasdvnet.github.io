"use strict";(self.webpackChunkpaginapwa=self.webpackChunkpaginapwa||[]).push([[684],{5928:(A,v,u)=>{u.r(v),u.d(v,{AutenticacionModule:()=>Te});var m=u(9808),r=u(3075),e=u(5e3),d=u(6696),p=u(9709);function g(i,s){1&i&&(e.TgZ(0,"small",13),e._uU(1," Ingrese un nombre "),e.qZA())}function n(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e._uU(1," Registro con exito "),e.TgZ(2,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",16),e._uU(4,"\xd7"),e.qZA()()()}}function o(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3," Esta etapa ya existe "),e.TgZ(4,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",16),e._uU(6,"\xd7"),e.qZA()()()}}let h=(()=>{class i{constructor(t,a,l){this.formBuilder=t,this.actRoute=a,this.data=l,this.registro=!1,this.error=!1,this.idciudadela="",this.etapa={},this.name=""}ngOnInit(){this.setForm()}registrar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.idciudadela=this.actRoute.snapshot.params.id,this.name="Etapa "+this.loginForm.value.nombre,this.etapa={ciudadela:this.idciudadela,name:this.name},this.data.newEtapa(this.etapa).subscribe(t=>{this.loginForm.reset(),this.registro=!0},t=>{this.error=!0}))}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[r.kI.required,r.kI.minLength(4)]]})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.gz),e.Y36(p.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-etapa"]],decls:18,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon3",1,"input-group-text"],["type","text","id","nombre","placeholder","nombre...","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.registrar()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Etapa"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre de la etapa"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"span",6),e._uU(10,"Etapa"),e.qZA()(),e._UZ(11,"input",7),e.qZA(),e.YNc(12,g,2,0,"small",8),e.qZA(),e.YNc(13,n,5,0,"div",9),e.YNc(14,o,7,0,"div",10),e.TgZ(15,"div",11)(16,"button",12),e._uU(17,"Registrar"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(12),e.Q6J("ngIf",a.validarCampos("nombre")),e.xp6(1),e.Q6J("ngIf",a.registro),e.xp6(1),e.Q6J("ngIf",a.error))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,m.O5],styles:[""]}),i})();var b=u(8553),q=u(8552);function x(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un nombre "),e.qZA())}function F(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function R(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function N(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function E(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function y(i,s){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function J(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Seleccion al menos una ciudadela "),e.qZA())}function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"span",28),e._uU(2),e.qZA(),e.TgZ(3,"div",29)(4,"button",30),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().eliminar(c.code)}),e._uU(5,"Eliminar"),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name)}}function k(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," No ha seleccionado ninguna ciudadela "),e.qZA())}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31),e._uU(1),e.TgZ(2,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",33),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function $(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",33),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let C=(()=>{class i{constructor(t,a,l,c,f,Z){this.formBuilder=t,this.router=a,this.authService=l,this.data=c,this.adminService=f,this.routerAct=Z,this.setId="",this.idActualUser="",this.ciudadelas=[],this.rol="admin",this.exito=!1,this.error=!1,this.alerta="",this.vacio=!1,this.actualNameUser="",this.registrar=!0,this.botonAdmin="Nuevo",this.admin={},this.cargoCiudadelas=[]}ngOnInit(){this.setForm(),this.comprobarId(),this.setCiudadelas()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&!this.vacio&&(this.cargarAdmin(),this.actualNameUser!=this.loginForm.value.usuario?(console.log("validar usuario"),this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"})):this.actualizarRegistro())}nuevoRegistro(){this.adminService.newAdmin(this.admin).subscribe(t=>{this.loginForm.reset(),this.cargoCiudadelas.splice(0,this.cargoCiudadelas.length),this.exito=!0,this.alerta="Administrador registrado con exito"},t=>{console.log(t),this.error=!0,this.alerta="No se pudo crear el administrador"})}actualizarRegistro(){this.adminService.updateAdmin(this.setId,this.admin).subscribe(t=>{this.exito=!0,this.alerta="Administrador actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el administrador"})}cargarAdmin(){this.admin={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,role:this.rol,ciudadelasCargo:this.cargoCiudadelas}}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}validarLista(){return this.vacio=!0,this.cargoCiudadelas.length>0&&(this.vacio=!1),this.vacio}setCiudadelas(){this.idActualUser=sessionStorage.getItem("id"),"string"==typeof this.idActualUser&&this.adminService.findAdminById(this.idActualUser).subscribe(t=>{"admin"==t.role?this.ciudadelas=t.ciudadelasCargo:this.data.getCiudadelas().subscribe(a=>{this.ciudadelas=a})})}select(t){console.log(t),this.removeListCiudadelas(t),this.setListCiudadela(t),this.loginForm.patchValue({ciudadela:" "})}removeListCiudadelas(t){for(let a=0;a<this.ciudadelas.length;a++)t==this.ciudadelas[a]._id&&this.ciudadelas.splice(a,1)}setListCiudadela(t){this.data.findCiudadelaById(t).subscribe(a=>{console.log(a),this.cargoCiudadelas.push(a),this.validarLista()})}eliminar(t){for(let a=0;a<this.cargoCiudadelas.length;a++)t==this.cargoCiudadelas[a].code&&(this.ciudadelas.push(this.cargoCiudadelas[a]),this.cargoCiudadelas.splice(a,1),this.validarLista())}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.botonAdmin="Editar",this.registrar=!1,this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[r.kI.required,r.kI.minLength(4)]],cedula:["",[r.kI.required,r.kI.pattern("^[0-9]{10}"),r.kI.minLength(10)]],celular:["",[r.kI.required,r.kI.pattern("(09)[0-9]{8}"),r.kI.minLength(10)]],usuario:["",[r.kI.required,r.kI.pattern("[a-zA-Z]*"),r.kI.minLength(4)]],password:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(30)]],ciudadela:[""]})}closeAlert(){this.exito=!1,this.error=!1}setEditId(){this.adminService.findAdminById(this.setId).subscribe(t=>{this.actualNameUser=t.user,this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,usuario:t.user,password:t.pass}),this.cargoCiudadelas=t.ciudadelasCargo;for(let a of this.cargoCiudadelas)this.removeListCiudadelas(a._id)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(b.e),e.Y36(p.D),e.Y36(q.l),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-admin"]],decls:45,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["t",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["class","input-group mb-3",4,"ngFor","ngForOf"],[1,"input-group","mb-2"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],[3,"value"],[1,"input-group","mb-3"],["type","text",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,a){if(1&t){const l=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nuevo Adminisrtador"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,x,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,F,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,R,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",11),e.YNc(23,N,2,0,"small",5),e.qZA(),e.TgZ(24,"div",2)(25,"label",12),e._uU(26,"Clave"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,E,2,0,"small",5),e.qZA(),e.TgZ(29,"div",2)(30,"label",14),e._uU(31,"Ciudadela"),e.qZA(),e.TgZ(32,"select",15,16),e.NdJ("change",function(){e.CHM(l);const f=e.MAs(33);return a.select(f.value)}),e._UZ(34,"option",17),e.YNc(35,y,2,2,"option",18),e.qZA(),e.YNc(36,J,2,0,"small",5),e.qZA(),e.YNc(37,w,6,1,"div",19),e.TgZ(38,"div",20),e.YNc(39,k,2,0,"small",5),e.qZA(),e.YNc(40,Y,5,1,"div",21),e.YNc(41,$,7,1,"div",22),e.TgZ(42,"div",23)(43,"button",24),e._uU(44),e.qZA()()()()}2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(8),e.Q6J("ngIf",a.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("celular")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("password")),e.xp6(7),e.Q6J("ngForOf",a.ciudadelas),e.xp6(1),e.Q6J("ngIf",a.validarCampos("ciudadela")),e.xp6(1),e.Q6J("ngForOf",a.cargoCiudadelas),e.xp6(2),e.Q6J("ngIf",a.vacio),e.xp6(1),e.Q6J("ngIf",a.exito),e.xp6(1),e.Q6J("ngIf",a.error),e.xp6(3),e.Oqu(a.botonAdmin))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,m.O5,r.EJ,r.YN,r.Kr,m.sg],styles:[""]}),i})();var z=u(6649);function L(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un nombre "),e.qZA())}function S(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function Q(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function M(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function B(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function V(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function G(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Seleccion una ciudadela "),e.qZA())}function O(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function D(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese la etapa "),e.qZA())}function H(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"label",20),e._uU(3,"Ciudadela"),e.qZA(),e.TgZ(4,"select",21,22),e.NdJ("change",function(){e.CHM(t);const l=e.MAs(5);return e.oxw().selectCiudadela(l.value)}),e._UZ(6,"option",23),e.YNc(7,V,2,2,"option",24),e.qZA(),e.YNc(8,G,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",25),e._uU(11,"Etapa"),e.qZA(),e.TgZ(12,"select",26),e._UZ(13,"option",23),e.YNc(14,O,2,2,"option",24),e.qZA(),e.YNc(15,D,2,0,"small",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.ciudadelas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("ciudadela")),e.xp6(6),e.Q6J("ngForOf",t.etapas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("etapa"))}}function j(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e._uU(1),e.TgZ(2,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",30),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function P(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",30),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let T=(()=>{class i{constructor(t,a,l,c,f,Z){this.formBuilder=t,this.router=a,this.guardService=l,this.authServ=c,this.data=f,this.routerAct=Z,this.setId="",this.idActualUser="",this.ciudadelas=[],this.etapas=[],this.rol="guard",this.registro=!1,this.error=!1,this.alerta="",this.botonGuard="Nuevo",this.registrar=!0,this.actualNameUser="",this.editable=!0,this.guard={}}ngOnInit(){this.setForm(),this.comprobarId(),this.setCiudadelas(),this.setCiudadelasByUser()}cargarGuard(){this.guard={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,role:this.rol,ciudadela:this.loginForm.value.ciudadela,etapa:this.loginForm.value.etapa},console.log(this.guard)}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.cargarGuard(),this.actualNameUser!=this.loginForm.value.usuario?(console.log("validar usuario"),this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"})):this.actualizarRegistro())}nuevoRegistro(){this.guardService.newGuard(this.guard).subscribe(t=>{this.loginForm.reset(),this.registro=!0,this.alerta="Guardia registrado con exito"},t=>{this.error=!0,this.alerta="No se pudo crear el guardia"})}actualizarRegistro(){this.guardService.updateGuard(this.setId,this.guard).subscribe(t=>{this.registro=!0,this.alerta="Guardia actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el guardia"})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}setCiudadelas(){this.data.getCiudadelas().subscribe(t=>{this.ciudadelas=t})}setCiudadelasByUser(){this.idActualUser=sessionStorage.getItem("id"),"string"==typeof this.idActualUser&&this.authServ.getUserById(this.idActualUser).subscribe(t=>{"admin"==t.role?this.ciudadelas=t.ciudadelasCargo:"guard"==t.role&&(this.editable=!1,"string"==typeof this.idActualUser&&this.setGuardValues(this.idActualUser))})}setGuardValues(t){this.guardService.findGuardById(t).subscribe(a=>{console.log(a),console.log(a.ciudadela),console.log(a.etapa),this.setEtapas(a.ciudadela),this.loginForm.patchValue({ciudadela:a.ciudadela,etapa:a.etapa})})}selectCiudadela(t){this.setEtapas(t),this.loginForm.value.etapa=""}setEtapas(t){this.data.findEtapasByCiudadelaId(t).subscribe(a=>{this.etapas=a})}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.registrar=!1,this.botonGuard="Editar",this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[r.kI.required,r.kI.minLength(4)]],cedula:["",[r.kI.required,r.kI.pattern("^[0-9]{10}"),r.kI.minLength(10)]],celular:["",[r.kI.required,r.kI.pattern("(09)[0-9]{8}"),r.kI.minLength(10)]],usuario:["",[r.kI.required,r.kI.pattern("[a-zA-Z]*"),r.kI.minLength(4)]],password:["",[r.kI.required,r.kI.minLength(8)],r.kI.maxLength(30)],ciudadela:["",[r.kI.required]],etapa:["",[r.kI.required]]})}setEditId(){this.guardService.findGuardById(this.setId).subscribe(t=>{this.actualNameUser=t.name,this.setEtapas(t.ciudadela),this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,usuario:t.user,password:t.pass,ciudadela:t.ciudadela,etapa:t.etapa})})}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(z.F),e.Y36(b.e),e.Y36(p.D),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-guard"]],decls:35,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],[4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["c",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","etapa",1,"form-label"],["id","etapa","formControlName","etapa",1,"form-control"],[3,"value"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nuevo Guardia"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,L,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,S,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,Q,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",11),e.YNc(23,M,2,0,"small",5),e.qZA(),e.TgZ(24,"div",2)(25,"label",12),e._uU(26,"Clave"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,B,2,0,"small",5),e.qZA(),e.YNc(29,H,16,4,"div",14),e.YNc(30,j,5,1,"div",15),e.YNc(31,P,7,1,"div",16),e.TgZ(32,"div",17)(33,"button",18),e._uU(34),e.qZA()()()()),2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(8),e.Q6J("ngIf",a.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("celular")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("password")),e.xp6(1),e.Q6J("ngIf",a.editable),e.xp6(1),e.Q6J("ngIf",a.registro),e.xp6(1),e.Q6J("ngIf",a.error),e.xp6(3),e.Oqu(a.botonGuard))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,m.O5,r.EJ,r.YN,r.Kr,m.sg],styles:[""]}),i})();function K(i,s){1&i&&(e.TgZ(0,"small",15),e._uU(1," Ingrese la manzana "),e.qZA())}function W(i,s){1&i&&(e.TgZ(0,"small",15),e._uU(1," Ingrese una villa "),e.qZA())}function X(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e._uU(1),e.TgZ(2,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",18),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",18),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}function te(i,s){1&i&&(e.TgZ(0,"button",20),e._uU(1,"Registrar"),e.qZA())}function ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().editar()}),e._uU(1,"Editar"),e.qZA()}}let I=(()=>{class i{constructor(t,a,l,c){this.formBuilder=t,this.router=a,this.data=l,this.routerAct=c,this.ciudadela="",this.etapa="",this.id="",this.alerta="",this.vivienda={},this.registro=!1,this.error=!1,this.botonRegistrar=!0,this.botonEditar=!1,this.loginForm=this.formBuilder.group({manzana:["",[r.kI.required,r.kI.minLength(1)]],villa:["",[r.kI.required,r.kI.minLength(1)]],descripcion:[""]})}ngOnInit(){this.validarId()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.vivienda={manzana:this.loginForm.value.manzana,villa:this.loginForm.value.villa,descripcion:this.loginForm.value.descripcion,ciudadela:this.ciudadela,etapa:this.etapa},console.log(this.vivienda),this.data.newVivienda(this.vivienda).subscribe(t=>{this.loginForm.reset(),this.registro=!0,this.alerta="Registro exitoso"},t=>{this.error=!0}))}validarId(){this.routerAct.snapshot.params.ciudadela&&this.routerAct.snapshot.params.etapa?(this.ciudadela=this.routerAct.snapshot.params.ciudadela,this.etapa=this.routerAct.snapshot.params.etapa):this.routerAct.snapshot.params.id&&(this.id=this.routerAct.snapshot.params.id,this.botonRegistrar=!1,this.botonEditar=!0,this.setData(this.id))}setData(t){this.data.findViviendaById(t).subscribe(a=>{console.log(a),this.loginForm.patchValue({manzana:a.manzana,villa:a.villa,descripcion:a.descripcion})})}editar(){this.vivienda={manzana:this.loginForm.value.manzana,villa:this.loginForm.value.villa,descripcion:this.loginForm.value.descripcion},this.data.updateVivienda(this.id,this.vivienda).subscribe(t=>{console.log(t),this.registro=!0,this.alerta="Registro actualizado correctamente"},t=>{this.error=!0,this.alerta="No se pudo actualizar el registro"})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(p.D),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-viviendas"]],decls:23,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","manzana",1,"form-label"],["type","text","id","manzana","placeholder","Manzana","formControlName","manzana","required","",1,"form-control"],["class","error",4,"ngIf"],["for","villa",1,"form-label"],["type","text","id","villa","placeholder","Villa","formControlName","villa","required","",1,"form-control"],["for","descripcion",1,"form-label"],["type","text","id","descripcion","placeholder","Descripcion (opcional)","formControlName","descripcion",1,"form-control"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit","class","btn btn-primary",4,"ngIf"],["type","button","class","btn btn-primary mr-2",3,"click",4,"ngIf"],[1,"error"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-primary","mr-2",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nueva vivienda"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Manzana"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,K,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"Villa"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,W,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Descripcion"),e.qZA(),e._UZ(17,"input",9),e.qZA(),e.YNc(18,X,5,1,"div",10),e.YNc(19,ee,7,1,"div",11),e.TgZ(20,"div",12),e.YNc(21,te,2,0,"button",13),e.YNc(22,ie,2,0,"button",14),e.qZA()()()),2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(8),e.Q6J("ngIf",a.validarCampos("manzana")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("villa")),e.xp6(5),e.Q6J("ngIf",a.registro),e.xp6(1),e.Q6J("ngIf",a.error),e.xp6(2),e.Q6J("ngIf",a.botonRegistrar),e.xp6(1),e.Q6J("ngIf",a.botonEditar))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,m.O5],styles:[""]}),i})();var _=u(7574),ae=u(8684);function re(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un nombre "),e.qZA())}function se(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function oe(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function le(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function ne(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function ue(i,s){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function de(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Seleccion una ciudadela "),e.qZA())}function ce(i,s){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function me(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese la etapa "),e.qZA())}function pe(i,s){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function he(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese la manzana "),e.qZA())}function ge(i,s){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function _e(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese la villa "),e.qZA())}function fe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"label",20),e._uU(3,"Ciudadela"),e.qZA(),e.TgZ(4,"select",21,22),e.NdJ("change",function(){e.CHM(t);const l=e.MAs(5);return e.oxw().selectCiudadela(l.value)}),e._UZ(6,"option",23),e.YNc(7,ue,2,2,"option",24),e.qZA(),e.YNc(8,de,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",25),e._uU(11,"Etapa"),e.qZA(),e.TgZ(12,"select",26,27),e.NdJ("change",function(){e.CHM(t);const l=e.MAs(13);return e.oxw().selectEtapa(l.value)}),e._UZ(14,"option",23),e.YNc(15,ce,2,2,"option",24),e.qZA(),e.YNc(16,me,2,0,"small",5),e.qZA(),e.TgZ(17,"div",2)(18,"label",28),e._uU(19,"Manzana"),e.qZA(),e.TgZ(20,"select",29,30),e.NdJ("change",function(){e.CHM(t);const l=e.MAs(21);return e.oxw().selectMz(l.value)}),e._UZ(22,"option",23),e.YNc(23,pe,2,2,"option",24),e.qZA(),e.YNc(24,he,2,0,"small",5),e.qZA(),e.TgZ(25,"div",2)(26,"label",31),e._uU(27,"Villa"),e.qZA(),e.TgZ(28,"select",32,33),e.NdJ("change",function(){e.CHM(t);const l=e.MAs(29);return e.oxw().selectVilla(l.value)}),e._UZ(30,"option",23),e.YNc(31,ge,2,2,"option",24),e.qZA(),e.YNc(32,_e,2,0,"small",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.ciudadelas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("ciudadela")),e.xp6(7),e.Q6J("ngForOf",t.etapas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("etapa")),e.xp6(7),e.Q6J("ngForOf",t.manzanas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("manzana")),e.xp6(7),e.Q6J("ngForOf",t.villas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("villa"))}}function ve(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e._uU(1),e.TgZ(2,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",37),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function Ze(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",38)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",37),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let U=(()=>{class i{constructor(t,a,l,c,f,Z){this.formBuilder=t,this.router=a,this.authService=l,this.data=c,this.resiService=f,this.routerAct=Z,this.setId="",this.idActualUser="",this.ciudadelas=[],this.etapas=[],this.viviendas=[],this.manzanas=[],this.villas=[],this.etapaForm="",this.manzanaForm="",this.villaForm="",this.viviendaForm="",this.infouser={},this.rol="user",this.exito=!1,this.error=!1,this.alerta="",this.registrar=!0,this.residente="Nuevo",this.actualNameUser="",this.editable=!0,this.user={}}ngOnInit(){this.setForm(),this.comprobarId(),this.setCiudadelas(),this.setCiudadelasByUser()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.setUser(),this.actualNameUser!=this.loginForm.value.usuario?(console.log("validar usuario"),this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"})):this.actualizarRegistro())}nuevoRegistro(){this.resiService.newResidente(this.user).subscribe(t=>{this.loginForm.reset(),this.exito=!0,this.alerta="Residente registrado con exito"},t=>{this.error=!0,this.alerta="No se pudo crear el residente"})}actualizarRegistro(){this.resiService.updateResidente(this.setId,this.user).subscribe(t=>{this.exito=!0,this.alerta="Residente actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el residente"})}setUser(){this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,role:this.rol,ciudadela:this.loginForm.value.ciudadela,etapa:this.loginForm.value.etapa,villa:this.viviendaForm}}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}setCiudadelas(){this.data.getCiudadelas().subscribe(t=>{this.ciudadelas=t})}setCiudadelasByUser(){this.idActualUser=sessionStorage.getItem("id"),"string"==typeof this.idActualUser&&this.authService.getUserById(this.idActualUser).subscribe(t=>{"admin"==t.role?this.ciudadelas=t.ciudadelasCargo:"user"==t.role&&(this.editable=!1,"string"==typeof this.idActualUser&&this.setUserValues(this.idActualUser))})}setUserValues(t){this.resiService.findResiById(t).subscribe(a=>{this.setEtapas(a.ciudadela),this.setVivienda(a.etapa),this.loginForm.patchValue({ciudadela:a.ciudadela,etapa:a.etapa}),this.editMzVilla(a.villa)})}selectCiudadela(t){this.setEtapas(t),this.manzanas=[],this.villas=[]}setEtapas(t){this.data.findEtapasByCiudadelaId(t).subscribe(a=>{this.etapas=a})}selectEtapa(t){this.etapaForm=t,this.manzanas=[],this.villas=[],this.setVivienda(t)}setVivienda(t){this.data.findViviendaByEtapa(t).subscribe(a=>{this.viviendas=a,this.setListMz()})}setListMz(){for(let t of this.viviendas)this.manzanas.includes(t.manzana)||this.manzanas.push(t.manzana);this.manzanas.reverse()}selectMz(t){this.manzanaForm=t,this.villas=[],this.setVillas()}setVillas(){for(let t of this.viviendas)t.manzana==this.manzanaForm&&this.villas.push(t.villa);this.villas.reverse()}selectVilla(t){this.villaForm=t;for(let a of this.viviendas)a.manzana==this.manzanaForm&&a.villa==this.villaForm&&(this.viviendaForm=a._id)}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.registrar=!1,this.residente="Editar",this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[r.kI.required,r.kI.minLength(4)]],cedula:["",[r.kI.required,r.kI.pattern("^[0-9]{10}"),r.kI.minLength(10)]],celular:["",[r.kI.required,r.kI.pattern("(09)[0-9]{8}"),r.kI.minLength(10)]],usuario:["",[r.kI.required,r.kI.pattern("[a-zA-Z]*"),r.kI.minLength(4)]],password:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(30)]],ciudadela:["",[r.kI.required]],etapa:["",[r.kI.required]],manzana:["",[r.kI.required]],villa:["",[r.kI.required]]})}setEditId(){this.resiService.findResiById(this.setId).subscribe(t=>{this.setEtapas(t.ciudadela),this.setVivienda(t.etapa),this.actualNameUser=t.user,this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,usuario:t.user,password:t.pass,ciudadela:t.ciudadela,etapa:t.etapa}),this.editMzVilla(t.villa)})}editMzVilla(t){this.viviendaForm=t,this.data.findViviendaById(t).subscribe(a=>{this.selectMz(a.manzana),this.loginForm.patchValue({manzana:a.manzana,villa:a.villa})})}closeAlert(){this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(b.e),e.Y36(p.D),e.Y36(ae.r),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],decls:35,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],[4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["t",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","etapa",1,"form-label"],["id","etapa","formControlName","etapa",1,"form-control",3,"change"],["e",""],["for","manzana",1,"form-label"],["id","manzana","formControlName","manzana",1,"form-control",3,"change"],["m",""],["for","villa",1,"form-label"],["id","villa","formControlName","villa",1,"form-control",3,"change"],["v",""],[3,"value"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,re,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,se,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,oe,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",11),e.YNc(23,le,2,0,"small",5),e.qZA(),e.TgZ(24,"div",2)(25,"label",12),e._uU(26,"Clave"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,ne,2,0,"small",5),e.qZA(),e.YNc(29,fe,33,8,"div",14),e.YNc(30,ve,5,1,"div",15),e.YNc(31,Ze,7,1,"div",16),e.TgZ(32,"div",17)(33,"button",18),e._uU(34),e.qZA()()()()),2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(3),e.hij("",a.residente," residente"),e.xp6(5),e.Q6J("ngIf",a.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("celular")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",a.validarCampos("password")),e.xp6(1),e.Q6J("ngIf",a.editable),e.xp6(1),e.Q6J("ngIf",a.exito),e.xp6(1),e.Q6J("ngIf",a.error),e.xp6(3),e.Oqu(a.residente))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,m.O5,r.EJ,r.YN,r.Kr,m.sg],styles:[""]}),i})();function be(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",17),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}const Ae=[{path:"login",component:(()=>{class i{constructor(t,a,l){this.formBuilder=t,this.router=a,this.authService=l,this.usuario="",this.password="",this.loginForm=this.formBuilder.group({usuario:["",[r.kI.required,r.kI.minLength(3)]],password:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(30)]]}),this.user={},this.error=!1,this.alerta=""}ngOnInit(){}autenticar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password},this.authService.inicioSesion(this.user).subscribe(t=>{sessionStorage.setItem("token",t.token),sessionStorage.setItem("id",t.id),this.authService.isLogueado()?this.router.navigateByUrl("/inicio/home"):this.router.navigateByUrl("/auth/login")},t=>{this.error=!0,this.alerta="Usuario o clave incorrecto"}))}closeAlert(){this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(b.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],decls:59,vars:2,consts:[["action","",3,"formGroup","ngSubmit"],[1,"container"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row"],[1,"mb-3"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password",1,"form-control"],[1,"col-2"],["type","submit",1,"btn","btn-primary"],[1,"mt-5"],[1,"table"],["scope","col"],["scope","row"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.autenticar()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Inicio sesion"),e.qZA(),e.YNc(4,be,7,1,"div",2),e.TgZ(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Usuario"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Clave"),e.qZA(),e._UZ(13,"input",8),e.qZA()(),e.TgZ(14,"div",3)(15,"div",9)(16,"button",10),e._uU(17,"Ingresar"),e.qZA()()(),e.TgZ(18,"div",11)(19,"p"),e._uU(20,"Usuarios de prueba"),e.qZA(),e.TgZ(21,"table",12)(22,"thead")(23,"tr")(24,"th",13),e._uU(25,"User"),e.qZA(),e.TgZ(26,"th",13),e._uU(27,"Usuario"),e.qZA(),e.TgZ(28,"th",13),e._uU(29,"Clave"),e.qZA()()(),e.TgZ(30,"tbody")(31,"tr")(32,"th",14),e._uU(33,"Admin root"),e.qZA(),e.TgZ(34,"td"),e._uU(35,"root"),e.qZA(),e.TgZ(36,"td"),e._uU(37,"root"),e.qZA()(),e.TgZ(38,"tr")(39,"th",14),e._uU(40,"Admin"),e.qZA(),e.TgZ(41,"td"),e._uU(42,"admin"),e.qZA(),e.TgZ(43,"td"),e._uU(44,"adminadmin"),e.qZA()(),e.TgZ(45,"tr")(46,"th",14),e._uU(47,"Residente"),e.qZA(),e.TgZ(48,"td"),e._uU(49,"user"),e.qZA(),e.TgZ(50,"td"),e._uU(51,"user"),e.qZA()(),e.TgZ(52,"tr")(53,"th",14),e._uU(54,"Guardia"),e.qZA(),e.TgZ(55,"td"),e._uU(56,"guard"),e.qZA(),e.TgZ(57,"td"),e._uU(58,"guard"),e.qZA()()()()()()()),2&t&&(e.Q6J("formGroup",a.loginForm),e.xp6(4),e.Q6J("ngIf",a.error))},directives:[r._Y,r.JL,r.sg,m.O5,r.Fj,r.JJ,r.u],styles:[""]}),i})()},{path:"register",component:U,canActivate:[_.a]},{path:"edit/:id",component:U,canActivate:[_.a]},{path:"guardia",component:T,canActivate:[_.a]},{path:"guardia/:id",component:T,canActivate:[_.a]},{path:"administrador",component:C,canActivate:[_.a]},{path:"administrador/:id",component:C,canActivate:[_.a]},{path:"vivienda/:id",component:I,canActivate:[_.a]},{path:"vivienda/:ciudadela/:etapa",component:I,canActivate:[_.a]},{path:"etapa/:id",component:h,canActivate:[_.a]},{path:"",redirectTo:"login"}];let Ce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(Ae)],d.Bz]}),i})(),Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,Ce,r.u5,r.UX]]}),i})()},9709:(A,v,u)=>{u.d(v,{D:()=>p});var m=u(2340),r=u(5e3),e=u(520),d=u(8553);let p=(()=>{class g{constructor(o,h){this.http=o,this.authServ=h,this.url=m.N.BASE_URL}validateUser(o){return console.log(`${this.url}users/new`,o),this.http.post(`${this.url}users/new`,o)}getEtapas(){return this.http.get(this.url+"etapas/all")}findEtapasByCiudadelaId(o){return console.log(`${this.url}etapas/ciudadela?ciudadela=${o}`),this.http.get(`${this.url}etapas/ciudadela?ciudadela=${o}`)}findEtapasById(o){return console.log(`${this.url}etapas/${o}`),this.http.get(`${this.url}etapas/${o}`)}findEtapaByName(o){return console.log(`${this.url}etapas/name?name=${o}`),this.http.get(`${this.url}etapas/name?name=${o}`)}newEtapa(o){return console.log(`${this.url}etapas/new`,o),this.http.post(`${this.url}etapas/new`,o)}findViviendaById(o){return console.log(`${this.url}viviendas/${o}`),this.http.get(`${this.url}viviendas/${o}`)}findViviendaByEtapa(o){return console.log(`${this.url}viviendas/search/etapa?etapa=${o}`),this.http.get(`${this.url}viviendas/search/etapa?etapa=${o}`)}newVivienda(o){return console.log(`${this.url}viviendas/new`,o),this.http.post(`${this.url}viviendas/new`,o)}updateVivienda(o,h){return console.log(`${this.url}viviendas/${o}`,h),this.http.put(`${this.url}viviendas/${o}`,h)}deleteVivienda(o){return console.log(`${this.url}viviendas/${o}`),this.http.delete(`${this.url}viviendas/${o}`)}getCiudadelas(){return this.http.get(this.url+"ciudadelas/all")}findCiudadelaById(o){return console.log(`${this.url}ciudadelas/${o}`),this.http.get(`${this.url}ciudadelas/${o}`)}}return g.\u0275fac=function(o){return new(o||g)(r.LFG(e.eN),r.LFG(d.e))},g.\u0275prov=r.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},8684:(A,v,u)=>{u.d(v,{r:()=>d});var m=u(2340),r=u(5e3),e=u(520);let d=(()=>{class p{constructor(n){this.http=n,this.url=m.N.BASE_URL+"residentes"}getResidentes(){return this.http.get(this.url+"/all")}findResiById(n){return this.http.get(`${this.url}/${n}`)}findResiByName(n){return console.log(`${this.url}/search/name?name=${n}`),this.http.get(`${this.url}/search/name?name=${n}`)}findResiByVilla(n){return console.log(`${this.url}/search/villa?villa=${n}`),this.http.get(`${this.url}/search/villa?villa=${n}`)}findResiByCiudadela(n){return console.log(`${this.url}/search/ciudadela?ciudadela=${n}`),this.http.get(`${this.url}/search/ciudadela?ciudadela=${n}`)}findResiByEtapa(n){return console.log(`${this.url}/search/etapa?etapa=${n}`),this.http.get(`${this.url}/search/etapa?etapa=${n}`)}newResidente(n){return this.http.post(this.url+"/new",n)}updateResidente(n,o){return console.log(`${this.url}/${n}`,o),this.http.put(`${this.url}/${n}`,o)}deleteResidente(n){return console.log(`${this.url}/${n}`),this.http.delete(`${this.url}/${n}`)}findResidentes(n,o,h){return(!n||null==n)&&(n=1),(!o||null==o)&&(o={}),(!h||null==h)&&(h=" "),console.log(`${this.url}/page?page=${n}&limit=${h}`,o),this.http.post(`${this.url}/page?page=${n}&limit=${h}`,o)}}return p.\u0275fac=function(n){return new(n||p)(r.LFG(e.eN))},p.\u0275prov=r.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);