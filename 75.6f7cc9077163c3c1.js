"use strict";(self.webpackChunkpaginapwa=self.webpackChunkpaginapwa||[]).push([[75],{4075:(U,_,n)=>{n.r(_),n.d(_,{AutenticacionModule:()=>Fe});var c=n(9808),a=n(3075),e=n(5e3),d=n(6696),m=n(9709);function v(i,s){1&i&&(e.TgZ(0,"small",11),e._uU(1," Ingrese un nombre "),e.qZA())}function l(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1," Registro con exito "),e.TgZ(2,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",14),e._uU(4,"\xd7"),e.qZA()()()}}function Z(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3," Esta ciudadela ya existe "),e.TgZ(4,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",14),e._uU(6,"\xd7"),e.qZA()()()}}let I=(()=>{class i{constructor(t,r,o){this.formBuilder=t,this.actRoute=r,this.data=o,this.registro=!1,this.error=!1,this.ciudadela={},this.name=""}ngOnInit(){this.setForm()}registrar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.name=this.loginForm.value.nombre,this.ciudadela={name:this.name},this.data.newCiudadela(this.ciudadela).subscribe(t=>{this.loginForm.reset(),this.registro=!0},t=>{this.error=!0}))}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[a.kI.required,a.kI.minLength(5)]]})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.gz),e.Y36(m.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-ciud"]],decls:15,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],[1,"input-group","mb-3"],["type","text","id","nombre","placeholder","...","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.registrar()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Ciudadela"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre de la ciudadela"),e.qZA(),e.TgZ(7,"div",4),e._UZ(8,"input",5),e.qZA(),e.YNc(9,v,2,0,"small",6),e.qZA(),e.YNc(10,l,5,0,"div",7),e.YNc(11,Z,7,0,"div",8),e.TgZ(12,"div",9)(13,"button",10),e._uU(14,"Registrar"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(9),e.Q6J("ngIf",r.validarCampos("nombre")),e.xp6(1),e.Q6J("ngIf",r.registro),e.xp6(1),e.Q6J("ngIf",r.error))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5],styles:[""]}),i})();function q(i,s){1&i&&(e.TgZ(0,"small",13),e._uU(1," Ingrese un nombre "),e.qZA())}function x(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e._uU(1," Registro con exito "),e.TgZ(2,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",16),e._uU(4,"\xd7"),e.qZA()()()}}function F(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3," Esta etapa ya existe "),e.TgZ(4,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",16),e._uU(6,"\xd7"),e.qZA()()()}}let N=(()=>{class i{constructor(t,r,o){this.formBuilder=t,this.actRoute=r,this.data=o,this.registro=!1,this.error=!1,this.idciudadela="",this.etapa={},this.name=""}ngOnInit(){this.setForm()}registrar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.idciudadela=this.actRoute.snapshot.params.id,this.name="Etapa "+this.loginForm.value.nombre,this.etapa={ciudadela:this.idciudadela,name:this.name},this.data.newEtapa(this.etapa).subscribe(t=>{this.loginForm.reset(),this.registro=!0},t=>{this.error=!0}))}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[a.kI.required,a.kI.minLength(4)]]})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.gz),e.Y36(m.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-etapa"]],decls:18,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon3",1,"input-group-text"],["type","text","id","nombre","placeholder","nombre...","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.registrar()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Etapa"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre de la etapa"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"span",6),e._uU(10,"Etapa"),e.qZA()(),e._UZ(11,"input",7),e.qZA(),e.YNc(12,q,2,0,"small",8),e.qZA(),e.YNc(13,x,5,0,"div",9),e.YNc(14,F,7,0,"div",10),e.TgZ(15,"div",11)(16,"button",12),e._uU(17,"Registrar"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(12),e.Q6J("ngIf",r.validarCampos("nombre")),e.xp6(1),e.Q6J("ngIf",r.registro),e.xp6(1),e.Q6J("ngIf",r.error))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5],styles:[""]}),i})();var f=n(8553),R=n(8552);function E(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un nombre "),e.qZA())}function y(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function J(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function k(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function w(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function Y(i,s){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function z(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," Seleccion al menos una ciudadela "),e.qZA())}function Q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"span",28),e._uU(2),e.qZA(),e.TgZ(3,"div",29)(4,"button",30),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().eliminar(u.code)}),e._uU(5,"Eliminar"),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name)}}function L(i,s){1&i&&(e.TgZ(0,"small",25),e._uU(1," No ha seleccionado ninguna ciudadela "),e.qZA())}function S(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31),e._uU(1),e.TgZ(2,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",33),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function M(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",33),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let b=(()=>{class i{constructor(t,r,o,u,g,h){this.formBuilder=t,this.router=r,this.authServ=o,this.data=u,this.adminService=g,this.routerAct=h,this.setId="",this.idActualUser="",this.ciudadelas=[],this.currentUser={},this.rol="admin",this.exito=!1,this.error=!1,this.alerta="",this.vacio=!1,this.actualNameUser="",this.registrar=!0,this.botonAdmin="Nuevo",this.admin={},this.cargoCiudadelas=[]}ngOnInit(){this.setForm(),this.comprobarId(),this.setCiudadelas()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&!this.vacio&&(this.cargarAdmin(),this.actualNameUser!=this.loginForm.value.usuario?this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"}):this.actualizarRegistro(),this.setCiudadelas())}nuevoRegistro(){this.adminService.newAdmin(this.admin).subscribe(t=>{this.loginForm.reset(),this.cargoCiudadelas.splice(0,this.cargoCiudadelas.length),this.exito=!0,this.alerta="Administrador registrado con exito"},t=>{this.error=!0,this.alerta="No se pudo crear el administrador"})}actualizarRegistro(){this.adminService.updateAdmin(this.setId,this.admin).subscribe(t=>{this.exito=!0,this.alerta="Administrador actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el administrador"})}cargarAdmin(){this.admin={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,role:this.rol,ciudadelasCargo:this.cargoCiudadelas}}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}validarLista(){return this.vacio=!0,this.cargoCiudadelas.length>0&&(this.vacio=!1),this.vacio}setCiudadelas(){this.currentUser=this.authServ.getCurrentUser(),"admin"==this.currentUser.role?this.adminService.findAdminById(this.currentUser.id).subscribe(t=>{this.ciudadelas=t.ciudadelasCargo}):this.data.getCiudadelas().subscribe(t=>{this.ciudadelas=t})}select(t){this.removeListCiudadelas(t),this.setListCiudadela(t),this.loginForm.patchValue({ciudadela:" "})}removeListCiudadelas(t){for(let r=0;r<this.ciudadelas.length;r++)t==this.ciudadelas[r]._id&&this.ciudadelas.splice(r,1)}setListCiudadela(t){this.data.findCiudadelaById(t).subscribe(r=>{this.cargoCiudadelas.push(r),this.validarLista()})}eliminar(t){for(let r=0;r<this.cargoCiudadelas.length;r++)t==this.cargoCiudadelas[r].code&&(this.ciudadelas.push(this.cargoCiudadelas[r]),this.cargoCiudadelas.splice(r,1),this.validarLista())}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.botonAdmin="Editar",this.registrar=!1,this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[a.kI.required,a.kI.minLength(4)]],cedula:["",[a.kI.required,a.kI.pattern("^[0-9]{10}"),a.kI.minLength(10)]],celular:["",[a.kI.required,a.kI.pattern("(09)[0-9]{8}"),a.kI.minLength(10)]],usuario:["",[a.kI.required,a.kI.pattern("[a-zA-Z]*"),a.kI.minLength(4)]],password:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(30)]],ciudadela:[""]})}closeAlert(){this.exito=!1,this.error=!1}setEditId(){this.adminService.findAdminById(this.setId).subscribe(t=>{this.actualNameUser=t.user,this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,usuario:t.user,password:t.pass}),this.cargoCiudadelas=t.ciudadelasCargo;for(let r of this.cargoCiudadelas)this.removeListCiudadelas(r._id)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.F0),e.Y36(f.e),e.Y36(m.D),e.Y36(R.l),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-admin"]],decls:45,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["t",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["class","input-group mb-3",4,"ngFor","ngForOf"],[1,"input-group","mb-2"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],[3,"value"],[1,"input-group","mb-3"],["type","text",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nuevo Adminisrtador"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,E,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,y,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,J,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",11),e.YNc(23,k,2,0,"small",5),e.qZA(),e.TgZ(24,"div",2)(25,"label",12),e._uU(26,"Clave"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,w,2,0,"small",5),e.qZA(),e.TgZ(29,"div",2)(30,"label",14),e._uU(31,"Ciudadela"),e.qZA(),e.TgZ(32,"select",15,16),e.NdJ("change",function(){e.CHM(o);const g=e.MAs(33);return r.select(g.value)}),e._UZ(34,"option",17),e.YNc(35,Y,2,2,"option",18),e.qZA(),e.YNc(36,z,2,0,"small",5),e.qZA(),e.YNc(37,Q,6,1,"div",19),e.TgZ(38,"div",20),e.YNc(39,L,2,0,"small",5),e.qZA(),e.YNc(40,S,5,1,"div",21),e.YNc(41,M,7,1,"div",22),e.TgZ(42,"div",23)(43,"button",24),e._uU(44),e.qZA()()()()}2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(8),e.Q6J("ngIf",r.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("celular")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("password")),e.xp6(7),e.Q6J("ngForOf",r.ciudadelas),e.xp6(1),e.Q6J("ngIf",r.validarCampos("ciudadela")),e.xp6(1),e.Q6J("ngForOf",r.cargoCiudadelas),e.xp6(2),e.Q6J("ngIf",r.vacio),e.xp6(1),e.Q6J("ngIf",r.exito),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(3),e.Oqu(r.botonAdmin))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5,a.EJ,a.YN,a.Kr,c.sg],styles:[""]}),i})();var V=n(6649);function G(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un nombre "),e.qZA())}function B(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function O(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function D(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function $(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function H(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function j(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Seleccion una ciudadela "),e.qZA())}function X(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function K(i,s){1&i&&(e.TgZ(0,"small",19),e._uU(1," Ingrese la etapa "),e.qZA())}function P(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"label",20),e._uU(3,"Ciudadela"),e.qZA(),e.TgZ(4,"select",21,22),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(5);return e.oxw().selectCiudadela(o.value)}),e._UZ(6,"option",23),e.YNc(7,H,2,2,"option",24),e.qZA(),e.YNc(8,j,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",25),e._uU(11,"Etapa"),e.qZA(),e.TgZ(12,"select",26),e._UZ(13,"option",23),e.YNc(14,X,2,2,"option",24),e.qZA(),e.YNc(15,K,2,0,"small",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.ciudadelas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("ciudadela")),e.xp6(6),e.Q6J("ngForOf",t.etapas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("etapa"))}}function W(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e._uU(1),e.TgZ(2,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",30),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",30),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let C=(()=>{class i{constructor(t,r,o,u,g,h){this.formBuilder=t,this.router=r,this.guardService=o,this.authServ=u,this.data=g,this.routerAct=h,this.setId="",this.idActualUser="",this.currentUser={},this.ciudadelas=[],this.etapas=[],this.rol="guard",this.registro=!1,this.error=!1,this.alerta="",this.botonGuard="Nuevo",this.registrar=!0,this.actualNameUser="",this.editable=!0,this.guard={}}ngOnInit(){this.setForm(),this.comprobarId(),this.currentUser=this.authServ.getCurrentUser(),this.setCiudadelas()}cargarGuard(){this.guard={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,role:this.rol,ciudadela:this.loginForm.value.ciudadela,etapa:this.loginForm.value.etapa}}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.cargarGuard(),this.actualNameUser!=this.loginForm.value.usuario?this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"}):this.actualizarRegistro())}nuevoRegistro(){this.guardService.newGuard(this.guard).subscribe(t=>{this.loginForm.reset(),this.registro=!0,this.alerta="Guardia registrado con exito"},t=>{this.error=!0,this.alerta="No se pudo crear el guardia"})}actualizarRegistro(){this.guardService.updateGuard(this.setId,this.guard).subscribe(t=>{this.registro=!0,this.alerta="Guardia actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el guardia"})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}setCiudadelas(){this.data.getCiudadelas().subscribe(t=>{this.ciudadelas=t,this.setCiudadelasByUser()})}setCiudadelasByUser(){"guard"==this.currentUser.role&&this.authServ.getUserById(this.currentUser.id).subscribe(t=>{this.editable=!1,this.setGuardValues(t)}),"admin"==this.currentUser.role&&this.authServ.getUserById(this.currentUser.id).subscribe(t=>{this.ciudadelas=t.ciudadelasCargo})}setGuardValues(t){this.setEtapas(t.ciudadela),this.loginForm.patchValue({ciudadela:t.ciudadela,etapa:t.etapa})}selectCiudadela(t){this.setEtapas(t),this.loginForm.value.etapa=""}setEtapas(t){this.data.findEtapasByCiudadelaId(t).subscribe(r=>{this.etapas=r})}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.registrar=!1,this.botonGuard="Editar",this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[a.kI.required,a.kI.minLength(4)]],cedula:["",[a.kI.required,a.kI.pattern("^[0-9]{10}"),a.kI.minLength(10)]],celular:["",[a.kI.required,a.kI.pattern("(09)[0-9]{8}"),a.kI.minLength(10)]],usuario:["",[a.kI.required,a.kI.pattern("[a-zA-Z]*"),a.kI.minLength(4)]],password:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(30)]],ciudadela:["",[a.kI.required]],etapa:["",[a.kI.required]]})}setEditId(){this.guardService.findGuardById(this.setId).subscribe(t=>{this.actualNameUser=t.name,this.setEtapas(t.ciudadela),this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,usuario:t.user,password:t.pass,ciudadela:t.ciudadela,etapa:t.etapa})})}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.F0),e.Y36(V.F),e.Y36(f.e),e.Y36(m.D),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-guard"]],decls:35,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],[4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["c",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","etapa",1,"form-label"],["id","etapa","formControlName","etapa",1,"form-control"],[3,"value"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nuevo Guardia"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,G,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,B,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,O,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",11),e.YNc(23,D,2,0,"small",5),e.qZA(),e.TgZ(24,"div",2)(25,"label",12),e._uU(26,"Clave"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,$,2,0,"small",5),e.qZA(),e.YNc(29,P,16,4,"div",14),e.YNc(30,W,5,1,"div",15),e.YNc(31,ee,7,1,"div",16),e.TgZ(32,"div",17)(33,"button",18),e._uU(34),e.qZA()()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(8),e.Q6J("ngIf",r.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("celular")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("password")),e.xp6(1),e.Q6J("ngIf",r.editable),e.xp6(1),e.Q6J("ngIf",r.registro),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(3),e.Oqu(r.botonGuard))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5,a.EJ,a.YN,a.Kr,c.sg],styles:[""]}),i})();function te(i,s){1&i&&(e.TgZ(0,"small",15),e._uU(1," Ingrese la manzana "),e.qZA())}function ie(i,s){1&i&&(e.TgZ(0,"small",15),e._uU(1," Ingrese una villa "),e.qZA())}function ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e._uU(1),e.TgZ(2,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",18),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",18),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}function se(i,s){1&i&&(e.TgZ(0,"button",20),e._uU(1,"Registrar"),e.qZA())}function oe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().editar()}),e._uU(1,"Editar"),e.qZA()}}let A=(()=>{class i{constructor(t,r,o,u){this.formBuilder=t,this.router=r,this.data=o,this.routerAct=u,this.ciudadela="",this.etapa="",this.id="",this.alerta="",this.vivienda={},this.registro=!1,this.error=!1,this.botonRegistrar=!0,this.botonEditar=!1,this.loginForm=this.formBuilder.group({manzana:["",[a.kI.required,a.kI.minLength(1)]],villa:["",[a.kI.required,a.kI.minLength(1)]],descripcion:[""]})}ngOnInit(){this.validarId()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.vivienda={manzana:this.loginForm.value.manzana,villa:this.loginForm.value.villa,descripcion:this.loginForm.value.descripcion,ciudadela:this.ciudadela,etapa:this.etapa},this.data.newVivienda(this.vivienda).subscribe(t=>{this.loginForm.reset(),this.registro=!0,this.alerta="Registro exitoso"},t=>{this.error=!0}))}validarId(){this.routerAct.snapshot.params.ciudadela&&this.routerAct.snapshot.params.etapa?(this.ciudadela=this.routerAct.snapshot.params.ciudadela,this.etapa=this.routerAct.snapshot.params.etapa):this.routerAct.snapshot.params.id&&(this.id=this.routerAct.snapshot.params.id,this.botonRegistrar=!1,this.botonEditar=!0,this.setData(this.id))}setData(t){this.data.findViviendaById(t).subscribe(r=>{this.loginForm.patchValue({manzana:r.manzana,villa:r.villa,descripcion:r.descripcion})})}editar(){this.vivienda={manzana:this.loginForm.value.manzana,villa:this.loginForm.value.villa,descripcion:this.loginForm.value.descripcion},this.data.updateVivienda(this.id,this.vivienda).subscribe(t=>{this.registro=!0,this.alerta="Registro actualizado correctamente"},t=>{this.error=!0,this.alerta="No se pudo actualizar el registro"})}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}closeAlert(){this.registro=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.F0),e.Y36(m.D),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reg-viviendas"]],decls:23,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","manzana",1,"form-label"],["type","text","id","manzana","placeholder","Manzana","formControlName","manzana","required","",1,"form-control"],["class","error",4,"ngIf"],["for","villa",1,"form-label"],["type","text","id","villa","placeholder","Villa","formControlName","villa","required","",1,"form-control"],["for","descripcion",1,"form-label"],["type","text","id","descripcion","placeholder","Descripcion (opcional)","formControlName","descripcion",1,"form-control"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit","class","btn btn-primary",4,"ngIf"],["type","button","class","btn btn-primary mr-2",3,"click",4,"ngIf"],[1,"error"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-primary","mr-2",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Nueva vivienda"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Manzana"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,te,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"Villa"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,ie,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Descripcion"),e.qZA(),e._UZ(17,"input",9),e.qZA(),e.YNc(18,ae,5,1,"div",10),e.YNc(19,re,7,1,"div",11),e.TgZ(20,"div",12),e.YNc(21,se,2,0,"button",13),e.YNc(22,oe,2,0,"button",14),e.qZA()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(8),e.Q6J("ngIf",r.validarCampos("manzana")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("villa")),e.xp6(5),e.Q6J("ngIf",r.registro),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(2),e.Q6J("ngIf",r.botonRegistrar),e.xp6(1),e.Q6J("ngIf",r.botonEditar))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5],styles:[""]}),i})();var p=n(7574),le=n(8684);function ne(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese un nombre "),e.qZA())}function ue(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese su n\xfamero de c\xe9dula (10 d\xedgitos) "),e.qZA())}function de(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese un n\xfamero de tel\xe9fono valido (10 d\xedgitos) "),e.qZA())}function ce(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese un email valido "),e.qZA())}function me(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese un usuario v\xe1lido, minimo 4 letras y sin espacios "),e.qZA())}function pe(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," La contrase\xf1a debe tener entre 8-30 caracteres "),e.qZA())}function ge(i,s){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function he(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Seleccion una ciudadela "),e.qZA())}function _e(i,s){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t._id),e.xp6(1),e.Oqu(t.name)}}function fe(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese la etapa "),e.qZA())}function ve(i,s){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function Ze(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese la manzana "),e.qZA())}function be(i,s){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function Ce(i,s){1&i&&(e.TgZ(0,"small",22),e._uU(1," Ingrese la villa "),e.qZA())}function Ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"label",23),e._uU(3,"Ciudadela"),e.qZA(),e.TgZ(4,"select",24,25),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(5);return e.oxw().selectCiudadela(o.value)}),e._UZ(6,"option",26),e.YNc(7,ge,2,2,"option",27),e.qZA(),e.YNc(8,he,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",28),e._uU(11,"Etapa"),e.qZA(),e.TgZ(12,"select",29,30),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(13);return e.oxw().selectEtapa(o.value)}),e._UZ(14,"option",26),e.YNc(15,_e,2,2,"option",27),e.qZA(),e.YNc(16,fe,2,0,"small",5),e.qZA(),e.TgZ(17,"div",2)(18,"label",31),e._uU(19,"Manzana"),e.qZA(),e.TgZ(20,"select",32,33),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(21);return e.oxw().selectMz(o.value)}),e._UZ(22,"option",26),e.YNc(23,ve,2,2,"option",27),e.qZA(),e.YNc(24,Ze,2,0,"small",5),e.qZA(),e.TgZ(25,"div",2)(26,"label",34),e._uU(27,"Villa"),e.qZA(),e.TgZ(28,"select",35,36),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(29);return e.oxw().selectVilla(o.value)}),e._UZ(30,"option",26),e.YNc(31,be,2,2,"option",27),e.qZA(),e.YNc(32,Ce,2,0,"small",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.ciudadelas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("ciudadela")),e.xp6(7),e.Q6J("ngForOf",t.etapas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("etapa")),e.xp6(7),e.Q6J("ngForOf",t.manzanas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("manzana")),e.xp6(7),e.Q6J("ngForOf",t.villas),e.xp6(1),e.Q6J("ngIf",t.validarCampos("villa"))}}function Te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e._uU(1),e.TgZ(2,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(3,"span",40),e._uU(4,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.alerta," ")}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",40),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}let T=(()=>{class i{constructor(t,r,o,u,g,h){this.formBuilder=t,this.router=r,this.authServ=o,this.data=u,this.resiService=g,this.routerAct=h,this.setId="",this.idActualUser="",this.currentUser={},this.ciudadelas=[],this.etapas=[],this.viviendas=[],this.manzanas=[],this.villas=[],this.etapaForm="",this.manzanaForm="",this.villaForm="",this.viviendaForm="",this.infouser={},this.rol="user",this.exito=!1,this.error=!1,this.alerta="",this.registrar=!0,this.residente="Nuevo",this.actualNameUser="",this.editable=!0,this.user={}}ngOnInit(){this.setForm(),this.comprobarId(),this.currentUser=this.authServ.getCurrentUser(),this.setCiudadelasByUser()}regedit(){this.closeAlert(),this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.setUser(),this.actualNameUser!=this.loginForm.value.usuario?this.data.validateUser({user:this.loginForm.value.usuario}).subscribe(t=>{this.registrar?this.nuevoRegistro():this.actualizarRegistro()},t=>{this.error=!0,this.alerta="Este nombre de usuario ya existe"}):this.actualizarRegistro(),this.manzanas=[],this.villas=[],this.etapas=[])}nuevoRegistro(){this.resiService.newResidente(this.user).subscribe(t=>{this.loginForm.reset(),this.exito=!0,this.alerta="Residente registrado con exito"},t=>{this.error=!0,this.alerta="No se pudo crear el residente"})}actualizarRegistro(){this.resiService.updateResidente(this.setId,this.user).subscribe(t=>{this.exito=!0,this.alerta="Residente actualizado con exito"},t=>{this.error=!0,this.alerta="No se pudo actualizar el residente"})}setUser(){this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password,name:this.loginForm.value.nombre,cedula:this.loginForm.value.cedula,celular:this.loginForm.value.celular,telefono:this.loginForm.value.telefono,email:this.loginForm.value.email,role:this.rol,ciudadela:this.loginForm.value.ciudadela,etapa:this.loginForm.value.etapa,villa:this.viviendaForm}}validarCampos(t){return this.loginForm.controls[t].errors&&this.loginForm.controls[t].touched}setCiudadelas(){this.data.getCiudadelas().subscribe(t=>{this.ciudadelas=t})}setCiudadelasByUser(){"user"==this.currentUser.role&&this.authServ.getUserById(this.currentUser.id).subscribe(t=>{this.editable=!1,this.setUserValues(t)}),"root"==this.currentUser.role&&this.setCiudadelas(),"admin"==this.currentUser.role&&this.authServ.getUserById(this.currentUser.id).subscribe(t=>{this.ciudadelas=t.ciudadelasCargo})}setUserValues(t){this.setEtapas(t.ciudadela),this.setVivienda(t.etapa),this.loginForm.patchValue({ciudadela:t.ciudadela,etapa:t.etapa}),this.editMzVilla(t.villa)}selectCiudadela(t){this.setEtapas(t),this.manzanas=[],this.villas=[]}setEtapas(t){this.data.findEtapasByCiudadelaId(t).subscribe(r=>{this.etapas=r})}selectEtapa(t){this.etapaForm=t,this.manzanas=[],this.villas=[],this.setVivienda(t)}setVivienda(t){this.data.findViviendaByEtapa(t).subscribe(r=>{this.viviendas=r,this.setListMz()})}setListMz(){for(let t of this.viviendas)this.manzanas.includes(t.manzana)||this.manzanas.push(t.manzana);this.manzanas.reverse()}selectMz(t){this.manzanaForm=t,this.villas=[],this.setVillas()}setVillas(){for(let t of this.viviendas)t.manzana==this.manzanaForm&&this.villas.push(t.villa);this.villas.reverse()}selectVilla(t){this.villaForm=t;for(let r of this.viviendas)r.manzana==this.manzanaForm&&r.villa==this.villaForm&&(this.viviendaForm=r._id)}comprobarId(){this.setId=this.routerAct.snapshot.params.id,""!=this.setId&&null!=this.setId&&null!=this.setId&&(this.registrar=!1,this.residente="Editar",this.setEditId())}setForm(){this.loginForm=this.formBuilder.group({nombre:["",[a.kI.required,a.kI.minLength(4)]],cedula:["",[a.kI.required,a.kI.pattern("^[0-9]{10}"),a.kI.minLength(10)]],celular:["",[a.kI.required,a.kI.pattern("(09)[0-9]{8}"),a.kI.minLength(10)]],telefono:["",[a.kI.pattern("^[0-9]*$"),a.kI.minLength(6),a.kI.maxLength(15)]],email:["",[a.kI.required,a.kI.email,a.kI.minLength(10)]],usuario:["",[a.kI.required,a.kI.pattern("[a-zA-Z]*"),a.kI.minLength(4)]],password:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(30)]],ciudadela:["",[a.kI.required]],etapa:["",[a.kI.required]],manzana:["",[a.kI.required]],villa:["",[a.kI.required]]})}setEditId(){this.resiService.findResiById(this.setId).subscribe(t=>{this.setEtapas(t.ciudadela),this.setVivienda(t.etapa),this.actualNameUser=t.user,this.loginForm.patchValue({nombre:t.name,cedula:t.cedula,celular:t.celular,telefono:t.telefono,email:t.email,usuario:t.user,password:t.pass,ciudadela:t.ciudadela,etapa:t.etapa}),this.editMzVilla(t.villa)})}editMzVilla(t){this.viviendaForm=t,this.data.findViviendaById(t).subscribe(r=>{this.selectMz(r.manzana),this.loginForm.patchValue({manzana:r.manzana,villa:r.villa})})}closeAlert(){this.exito=!1,this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.F0),e.Y36(f.e),e.Y36(m.D),e.Y36(le.r),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],decls:44,vars:12,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre","required","",1,"form-control"],["class","error",4,"ngIf"],["for","cedula",1,"form-label"],["type","text","id","cedula","placeholder","C\xe9dula","formControlName","cedula","required","",1,"form-control"],["for","celular",1,"form-label"],["type","tel","id","celular","placeholder","Celular","formControlName","celular","required","",1,"form-control"],["for","telefono",1,"form-label"],["type","tel","id","telefono","placeholder","Telefono (opcional)","formControlName","telefono",1,"form-control"],["type","email","id","email","placeholder","Email","formControlName","email","required","",1,"form-control"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password","required","",1,"form-control"],[4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],[1,"error"],["for","ciudadela",1,"form-label"],["id","ciudadela","formControlName","ciudadela",1,"form-control",3,"change"],["t",""],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","etapa",1,"form-label"],["id","etapa","formControlName","etapa",1,"form-control",3,"change"],["e",""],["for","manzana",1,"form-label"],["id","manzana","formControlName","manzana",1,"form-control",3,"change"],["m",""],["for","villa",1,"form-label"],["id","villa","formControlName","villa",1,"form-control",3,"change"],["v",""],[3,"value"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.regedit()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nombre completo"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,ne,2,0,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"label",6),e._uU(11,"C\xe9dula"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,ue,2,0,"small",5),e.qZA(),e.TgZ(14,"div",2)(15,"label",8),e._uU(16,"Celular"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,de,2,0,"small",5),e.qZA(),e.TgZ(19,"div",2)(20,"label",10),e._uU(21,"Telefono"),e.qZA(),e._UZ(22,"input",11),e.qZA(),e.TgZ(23,"div",2)(24,"label",8),e._uU(25,"Email"),e.qZA(),e._UZ(26,"input",12),e.YNc(27,ce,2,0,"small",5),e.qZA(),e.TgZ(28,"div",2)(29,"label",13),e._uU(30,"Usuario"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,me,2,0,"small",5),e.qZA(),e.TgZ(33,"div",2)(34,"label",15),e._uU(35,"Clave"),e.qZA(),e._UZ(36,"input",16),e.YNc(37,pe,2,0,"small",5),e.qZA(),e.YNc(38,Ae,33,8,"div",17),e.YNc(39,Te,5,1,"div",18),e.YNc(40,Ue,7,1,"div",19),e.TgZ(41,"div",20)(42,"button",21),e._uU(43),e.qZA()()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(3),e.hij("",r.residente," residente"),e.xp6(5),e.Q6J("ngIf",r.validarCampos("nombre")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("cedula")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("celular")),e.xp6(9),e.Q6J("ngIf",r.validarCampos("email")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("usuario")),e.xp6(5),e.Q6J("ngIf",r.validarCampos("password")),e.xp6(1),e.Q6J("ngIf",r.editable),e.xp6(1),e.Q6J("ngIf",r.exito),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(3),e.Oqu(r.residente))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,c.O5,a.EJ,a.YN,a.Kr,c.sg],styles:[""]}),i})();function Ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAlert()}),e.TgZ(5,"span",17),e._uU(6,"\xd7"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.alerta," ")}}const qe=[{path:"login",component:(()=>{class i{constructor(t,r,o){this.formBuilder=t,this.router=r,this.authService=o,this.usuario="",this.password="",this.loginForm=this.formBuilder.group({usuario:["",[a.kI.required,a.kI.minLength(3)]],password:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(30)]]}),this.user={},this.error=!1,this.alerta=""}ngOnInit(){}autenticar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password},this.authService.inicioSesion(this.user).subscribe(t=>{this.authService.isLogueado()?this.router.navigateByUrl("/inicio/home"):this.router.navigateByUrl("/auth/login")},t=>{this.error=!0,this.alerta="Usuario o clave incorrecto"}))}closeAlert(){this.error=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.qu),e.Y36(d.F0),e.Y36(f.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],decls:59,vars:2,consts:[["action","",3,"formGroup","ngSubmit"],[1,"container"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row"],[1,"mb-3"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Usuario","formControlName","usuario",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Clave","formControlName","password",1,"form-control"],[1,"col-2"],["type","submit",1,"btn","btn-primary"],[1,"mt-5"],[1,"table"],["scope","col"],["scope","row"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.autenticar()}),e.TgZ(1,"div",1)(2,"h1"),e._uU(3,"Inicio sesion"),e.qZA(),e.YNc(4,Ie,7,1,"div",2),e.TgZ(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Usuario/Correo"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Clave"),e.qZA(),e._UZ(13,"input",8),e.qZA()(),e.TgZ(14,"div",3)(15,"div",9)(16,"button",10),e._uU(17,"Ingresar"),e.qZA()()(),e.TgZ(18,"div",11)(19,"p"),e._uU(20,"Usuarios de prueba"),e.qZA(),e.TgZ(21,"table",12)(22,"thead")(23,"tr")(24,"th",13),e._uU(25,"User"),e.qZA(),e.TgZ(26,"th",13),e._uU(27,"Usuario"),e.qZA(),e.TgZ(28,"th",13),e._uU(29,"Clave"),e.qZA()()(),e.TgZ(30,"tbody")(31,"tr")(32,"th",14),e._uU(33,"Admin root"),e.qZA(),e.TgZ(34,"td"),e._uU(35,"root"),e.qZA(),e.TgZ(36,"td"),e._uU(37,"root"),e.qZA()(),e.TgZ(38,"tr")(39,"th",14),e._uU(40,"Admin"),e.qZA(),e.TgZ(41,"td"),e._uU(42,"admin"),e.qZA(),e.TgZ(43,"td"),e._uU(44,"adminadmin"),e.qZA()(),e.TgZ(45,"tr")(46,"th",14),e._uU(47,"Residente"),e.qZA(),e.TgZ(48,"td"),e._uU(49,"migungelnei@hotmail.com"),e.qZA(),e.TgZ(50,"td"),e._uU(51,"migungelnei@hotmail.com"),e.qZA()(),e.TgZ(52,"tr")(53,"th",14),e._uU(54,"Guardia"),e.qZA(),e.TgZ(55,"td"),e._uU(56,"guard"),e.qZA(),e.TgZ(57,"td"),e._uU(58,"guardguard"),e.qZA()()()()()()()),2&t&&(e.Q6J("formGroup",r.loginForm),e.xp6(4),e.Q6J("ngIf",r.error))},directives:[a._Y,a.JL,a.sg,c.O5,a.Fj,a.JJ,a.u],styles:[""]}),i})()},{path:"register",component:T,canActivate:[p.a]},{path:"edit/:id",component:T,canActivate:[p.a]},{path:"guardia",component:C,canActivate:[p.a]},{path:"guardia/:id",component:C,canActivate:[p.a]},{path:"administrador",component:b,canActivate:[p.a]},{path:"administrador/:id",component:b,canActivate:[p.a]},{path:"vivienda/:id",component:A,canActivate:[p.a]},{path:"vivienda/:ciudadela/:etapa",component:A,canActivate:[p.a]},{path:"etapa/:id",component:N,canActivate:[p.a]},{path:"ciudadela",component:I,canActivate:[p.a]},{path:"",redirectTo:"login"}];let xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(qe)],d.Bz]}),i})(),Fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,xe,a.u5,a.UX]]}),i})()},9709:(U,_,n)=>{n.d(_,{D:()=>d});var c=n(2340),a=n(5e3),e=n(520);let d=(()=>{class m{constructor(l){this.http=l,this.url=c.N.BASE_URL}validateUser(l){return this.http.post(`${this.url}users/new`,l)}getEtapas(){return this.http.get(this.url+"etapas/all")}findEtapasByCiudadelaId(l){return this.http.get(`${this.url}etapas/ciudadela?ciudadela=${l}`)}findEtapasById(l){return this.http.get(`${this.url}etapas/${l}`)}findEtapaByName(l){return this.http.get(`${this.url}etapas/name?name=${l}`)}newEtapa(l){return this.http.post(`${this.url}etapas/new`,l)}deleteEtapa(l){return this.http.delete(`${this.url}etapas/${l}`)}findViviendaById(l){return this.http.get(`${this.url}viviendas/${l}`)}findViviendaByEtapa(l){return this.http.get(`${this.url}viviendas/search/etapa?etapa=${l}`)}newVivienda(l){return this.http.post(`${this.url}viviendas/new`,l)}updateVivienda(l,Z){return this.http.put(`${this.url}viviendas/${l}`,Z)}deleteVivienda(l){return this.http.delete(`${this.url}viviendas/${l}`)}getCiudadelas(){return this.http.get(this.url+"ciudadelas/all")}findCiudadelaById(l){return this.http.get(`${this.url}ciudadelas/${l}`)}newCiudadela(l){return this.http.post(this.url+"ciudadelas/new",l)}}return m.\u0275fac=function(l){return new(l||m)(a.LFG(e.eN))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);